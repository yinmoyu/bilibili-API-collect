import{_ as o,c as p,a as l,b as t,d as n,e as d,w as e,r,o as c}from"./app-Dgsdh8A6.js";const i={};function D(u,s){const a=r("RouteLink");return c(),p("div",null,[s[17]||(s[17]=l('<h1 id="弹幕操作" tabindex="-1"><a class="header-anchor" href="#弹幕操作"><span>弹幕操作</span></a></h1><h2 id="发送视频弹幕" tabindex="-1"><a class="header-anchor" href="#发送视频弹幕"><span>发送视频弹幕</span></a></h2><blockquote><p>https://api.bilibili.com/x/v2/dm/post</p></blockquote><p><em>请求方式：POST</em></p><p>认证方式：Cookie（SESSDATA）或APP</p><p>此接口与漫画弹幕相同</p><p><code>mode=6</code>的逆向弹幕与<code>mode=8</code>的代码弹幕不可发送</p><p><strong>URL参数:</strong></p>',8)),t("table",null,[s[14]||(s[14]=t("thead",null,[t("tr",null,[t("th",null,"参数名"),t("th",null,"类型"),t("th",null,"内容"),t("th",null,"必要性"),t("th",null,"备注")])],-1)),t("tbody",null,[s[12]||(s[12]=t("tr",null,[t("td",null,"web_location"),t("td",null,"str"),t("td",null,"普通视频: 1315873"),t("td",null,"不必要"),t("td")],-1)),s[13]||(s[13]=t("tr",null,[t("td",null,"csrf"),t("td",null,"str"),t("td",null,"CSRF Token (即 Cookie 中 bili_jct)"),t("td",null,"Cookie 方式必要"),t("td")],-1)),t("tr",null,[s[2]||(s[2]=t("td",null,"w_rid",-1)),s[3]||(s[3]=t("td",null,"str",-1)),s[4]||(s[4]=t("td",null,"Wbi 签名",-1)),s[5]||(s[5]=t("td",null,"必要",-1)),t("td",null,[s[1]||(s[1]=n("参见 ")),d(a,{to:"/docs/misc/sign/wbi.html"},{default:e(()=>s[0]||(s[0]=[n("Wbi 签名")])),_:1,__:[0]})])]),t("tr",null,[s[8]||(s[8]=t("td",null,"wts",-1)),s[9]||(s[9]=t("td",null,"str",-1)),s[10]||(s[10]=t("td",null,"UNIX 秒级时间戳",-1)),s[11]||(s[11]=t("td",null,"必要",-1)),t("td",null,[s[7]||(s[7]=n("参见 ")),d(a,{to:"/docs/misc/sign/wbi.html"},{default:e(()=>s[6]||(s[6]=[n("Wbi 签名")])),_:1,__:[6]})])])])]),s[18]||(s[18]=l(`<p><strong>正文参数（ application/x-www-form-urlencoded ）：</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>内容</th><th>必要性</th><th>备注</th></tr></thead><tbody><tr><td>access_key</td><td>str</td><td>APP 登录 Token</td><td>APP 方式必要</td><td></td></tr><tr><td>type</td><td>num</td><td>弹幕类选择</td><td>必要</td><td>1：视频弹幕<br>2：漫画弹幕</td></tr><tr><td>oid</td><td>num</td><td>视频 cid</td><td>必要</td><td></td></tr><tr><td>msg</td><td>str</td><td>弹幕内容</td><td>必要</td><td>长度小于 100 字符</td></tr><tr><td>bvid</td><td>str</td><td>稿件 bvid</td><td>必要（可选）</td><td>avid 与 bvid 任选一个</td></tr><tr><td>aid</td><td>num</td><td>稿件 avid</td><td>必要（可选）</td><td>avid 与 bvid 任选一个</td></tr><tr><td>progress</td><td>num</td><td>弹幕出现在视频内的时间</td><td>非必要</td><td>单位为毫秒<br>默认为0</td></tr><tr><td>color</td><td>num</td><td>弹幕颜色设置</td><td>非必要</td><td>十进制 RGB888 值<br>如<code>16777215</code>为 #FFFFFF 即白色</td></tr><tr><td>fontsize</td><td>num</td><td>弹幕字号设置</td><td>非必要</td><td>默认为 25<br>极小：12<br>超小：16<br>小：18<br>标准：25<br>大：36<br>超大：45<br>极大：64</td></tr><tr><td>pool</td><td>num</td><td>弹幕池选择</td><td>非必要</td><td>0：普通池<br>1：字幕池<br>2：特殊池（代码/BAS弹幕）<br>默认为0</td></tr><tr><td>mode</td><td>num</td><td>弹幕类型选择</td><td>必要</td><td>1：普通弹幕<br>4：底部弹幕<br>5：顶部弹幕<br>7：高级弹幕<br>9：BAS弹幕（<code>pool</code>必须为2）</td></tr><tr><td>rnd</td><td>num</td><td>当前时间戳*1000000</td><td>非必要</td><td><strong>若无此项，则发送弹幕冷却时间限制为90s</strong><br>若有此项，则发送弹幕冷却时间限制为5s</td></tr><tr><td>colorful</td><td>num</td><td>彩色弹幕</td><td>非必要</td><td>60001：专属渐变彩色（需要会员）</td></tr><tr><td>checkbox_type</td><td>num</td><td>是否带 UP 身份标识</td><td>非必要</td><td>0：普通<br>4：带有标识</td></tr><tr><td>csrf</td><td>str</td><td>CSRF Token（位于 Cookie）</td><td>Cookie 方式必要</td><td></td></tr></tbody></table><p><strong>json回复：</strong></p><p>根对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>code</td><td>num</td><td>返回值</td><td>0：成功<br>-101：账号未登录<br>-102：账号被封停<br>-111：csrf校验失败<br>-400：请求错误<br>-404：无此项<br>36700：系统升级中<br>36701：弹幕包含被禁止的内容<br>36702：弹幕长度大于100<br>36703：发送频率过快<br>36704：禁止向未审核的视频发送弹幕<br>36705：您的等级不足，不能发送弹幕<br>36706：您的等级不足，不能发送顶端弹幕<br>36707：您的等级不足，不能发送底端弹幕<br>36708：您的等级不足，不能发送彩色弹幕<br>36709：您的等级不足，不能发送高级弹幕<br>36710：您的权限不足，不能发送这种样式的弹幕<br>36711：该视频禁止发送弹幕<br>36712：level 1用户发送弹幕的最大长度为20<br>36713：稿件未付费<br>36714：弹幕发送时间不合法<br>36715：当日操作数量超过上限<br>36718：目前您不是大会员，无法使用会员权益</td></tr><tr><td>message</td><td>str</td><td>错误信息</td><td>默认为0</td></tr><tr><td>ttl</td><td>num</td><td>1</td><td></td></tr><tr><td>data</td><td>obj</td><td>信息本体</td><td></td></tr></tbody></table><p><code>data</code>对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>action</td><td>str</td><td>（？）</td><td></td></tr><tr><td>animation</td><td>str</td><td>弹幕样式 Json？</td><td></td></tr><tr><td>colorful_src</td><td>str 或 obj</td><td>渐变彩色样式信息？</td><td>当请求参数<code>colorful=60001</code>时有效</td></tr><tr><td>dm_content</td><td>str</td><td>（？）</td><td></td></tr><tr><td>dmid</td><td>num</td><td>弹幕 dmid</td><td></td></tr><tr><td>dmid_str</td><td>str</td><td>弹幕 dmid</td><td>字串形式</td></tr><tr><td>visible</td><td>bool</td><td>（？）</td><td></td></tr></tbody></table><p><code>data</code>中的<code>colorful_src</code>对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>type</td><td>num</td><td>60001</td><td></td></tr><tr><td>src</td><td>str</td><td>渐变色样式 Json？</td><td></td></tr></tbody></table><p><strong>示例：</strong></p><p>为视频<code>av2</code>/<code>BV1xx411c7mD</code>（cid为<code>62131</code>）的 5000ms 位置发送一条弹幕<code>前来考古</code>（颜色为 #FFFFFF，字号 25，普通弹幕，游动弹幕）</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="background-color:#1E1E1E;color:#D4D4D4;"><pre class="shiki dark-plus vp-code"><code class="language-shell"><span class="line"><span style="color:#DCDCAA;">curl</span><span style="color:#CE9178;"> &#39;https://api.bilibili.com/x/v2/dm/post&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#569CD6;">    --data-urlencode</span><span style="color:#CE9178;"> &#39;type=1&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#569CD6;">    --data-urlencode</span><span style="color:#CE9178;"> &#39;oid=62131&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#569CD6;">    --data-urlencode</span><span style="color:#CE9178;"> &#39;msg=前来考古&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#569CD6;">    --data-urlencode</span><span style="color:#CE9178;"> &#39;aid=2&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#569CD6;">    --data-urlencode</span><span style="color:#CE9178;"> &#39;progress=5000&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#569CD6;">    --data-urlencode</span><span style="color:#CE9178;"> &#39;color=16777215&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#569CD6;">    --data-urlencode</span><span style="color:#CE9178;"> &#39;fontsize=25&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#569CD6;">    --data-urlencode</span><span style="color:#CE9178;"> &#39;pool=0&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#569CD6;">    --data-urlencode</span><span style="color:#CE9178;"> &#39;mode=1&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#569CD6;">    --data-urlencode</span><span style="color:#CE9178;"> &#39;rnd=3456789987654321&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#569CD6;">    --data-urlencode</span><span style="color:#CE9178;"> &#39;csrf=xxx&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#569CD6;">    -b</span><span style="color:#CE9178;"> &#39;SESSDATA=xxx&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details><summary>查看响应示例：</summary><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" style="background-color:#1E1E1E;color:#D4D4D4;"><pre class="shiki dark-plus vp-code"><code class="language-json"><span class="line"><span style="color:#D4D4D4;">{</span></span>
<span class="line"><span style="color:#9CDCFE;">    &quot;code&quot;</span><span style="color:#D4D4D4;">:</span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">    &quot;message&quot;</span><span style="color:#D4D4D4;">:</span><span style="color:#CE9178;">&quot;0&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">    &quot;ttl&quot;</span><span style="color:#D4D4D4;">:</span><span style="color:#B5CEA8;">1</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">    &quot;data&quot;</span><span style="color:#D4D4D4;">:{</span></span>
<span class="line"><span style="color:#9CDCFE;">        &quot;action&quot;</span><span style="color:#D4D4D4;">:</span><span style="color:#CE9178;">&quot;&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">        &quot;dmid&quot;</span><span style="color:#D4D4D4;">:</span><span style="color:#B5CEA8;">32161968826613767</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">        &quot;dmid_str&quot;</span><span style="color:#D4D4D4;">:</span><span style="color:#CE9178;">&quot;32161968826613767&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">        &quot;visible&quot;</span><span style="color:#D4D4D4;">:</span><span style="color:#569CD6;">true</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="发送互动弹幕" tabindex="-1"><a class="header-anchor" href="#发送互动弹幕"><span>发送互动弹幕</span></a></h2><blockquote><p>https://api.bilibili.com/x/v2/dm/command/post</p></blockquote><p><em>请求方式：POST</em></p><p>认证方式：Cookie（SESSDATA）或APP</p><p>2020-09-25 B站更新了互动弹幕功能，包括UP主头像弹幕、关联视频弹幕、视频内嵌引导关注按钮三大功能</p><p>详情见：</p><p><a href="https://www.bilibili.com/read/cv7728299" target="_blank" rel="noopener noreferrer">【客户端更新】6.10版本更新！UP主支持发布关联视频弹幕</a></p><p><a href="https://www.bilibili.com/blackboard/activity-c8a0iDRQy.html" target="_blank" rel="noopener noreferrer">引导关注卡片</a></p><p><strong>正文参数（ application/x-www-form-urlencoded ）：</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>内容</th><th>必要性</th><th>备注</th></tr></thead><tbody><tr><td>access_key</td><td>str</td><td>APP登录Token</td><td>APP方式必要</td><td></td></tr><tr><td>type</td><td>num</td><td>互动弹幕类型</td><td>必要</td><td>1：UP主头像弹幕<br>2：关联视频弹幕<br>5：视频内嵌引导关注按钮</td></tr><tr><td>aid</td><td>num</td><td>稿件avid</td><td>必要</td><td></td></tr><tr><td>cid</td><td>num</td><td>视频cid</td><td>必要</td><td></td></tr><tr><td>progress</td><td>num</td><td>弹幕出现在视频内的时间</td><td>非必要</td><td>单位为毫秒<br>默认为0</td></tr><tr><td>plat</td><td>num</td><td>平台标识</td><td>必要</td><td>1：web端<br>2：安卓端<br>8：视频管理页面</td></tr><tr><td>data</td><td>str</td><td>json序列</td><td>必要</td><td></td></tr><tr><td>dmid</td><td>num</td><td>修改互动弹幕的弹幕id</td><td>非必要</td><td>注：修改弹幕<code>plat</code>必须为8</td></tr><tr><td>csrf</td><td>str</td><td>CSRF Token（位于cookie）</td><td>Cookie方式必要</td><td></td></tr></tbody></table><p><code>data</code>参数json序列：</p><p>类型为【UP主头像弹幕】时：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>msg</td><td>str</td><td>弹幕内容</td><td></td></tr></tbody></table><p>类型为【关联视频弹幕】时：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>msg</td><td>str</td><td>弹幕内容</td><td></td></tr><tr><td>bvid</td><td>str</td><td>关联视频的bvid</td><td></td></tr></tbody></table><p>类型为【视频内嵌引导关注按钮】时：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>duration</td><td>num</td><td>持续时间</td><td>单位为毫秒</td></tr><tr><td>posX</td><td>num</td><td>X坐标</td><td>区间：[118-549]</td></tr><tr><td>posY</td><td>num</td><td>Y坐标</td><td>区间：[82-293]</td></tr></tbody></table><p><strong>json回复：</strong></p><p>根对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>code</td><td>num</td><td>返回值</td><td>0：成功<br>-101：账号未登录<br>-102：账号被封停<br>-111：csrf校验失败<br>-400：请求错误<br>-404：无此项<br>-500：服务器错误<br>36711：该视频禁止发送弹幕<br>79026：发送失败，请勿填写当前稿件bvid<br>79024：发送失败，请输入正确的bvid<br>79036：该指令弹幕超出限制<br>79037：关注弹幕坐标溢出</td></tr><tr><td>message</td><td>str</td><td>错误信息</td><td>默认为0</td></tr><tr><td>ttl</td><td>num</td><td>1</td><td></td></tr><tr><td>data</td><td>正确时：obj<br>错误时：null</td><td>信息本体</td><td></td></tr></tbody></table><p><code>data</code>对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>command</td><td>str</td><td>指令？</td><td>UP主头像弹幕：#UP#<br>关联视频弹幕：#LINK#<br>视频内嵌引导关注按钮：#ATTENTION#</td></tr><tr><td>content</td><td>str</td><td>弹幕内容</td><td></td></tr><tr><td>extra</td><td>str</td><td>弹幕数据</td><td>json序列</td></tr><tr><td>id</td><td>num</td><td>弹幕dmid</td><td></td></tr><tr><td>idStr</td><td>str</td><td>弹幕dmid</td><td>字串形式</td></tr><tr><td>mid</td><td>num</td><td>用户mid</td><td></td></tr><tr><td>oid</td><td>num</td><td>视频cid</td><td></td></tr><tr><td>progress</td><td>num</td><td>弹幕出现在视频内的时间</td><td></td></tr><tr><td>type</td><td>num</td><td>互动弹幕类型</td><td>1：UP主头像弹幕<br>2：关联视频弹幕<br>5：视频内嵌引导关注按钮</td></tr></tbody></table><p><code>extra</code>序列数据：</p><p>类型为【UP主头像弹幕】时：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>icon</td><td>str</td><td>UP主头像url</td><td></td></tr></tbody></table><p>类型为【关联视频弹幕】时：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>aid</td><td>num</td><td>关联视频的avid</td><td></td></tr><tr><td>title</td><td>str</td><td>关联视频的标题</td><td></td></tr><tr><td>bvid</td><td>str</td><td>关联视频的bvid</td><td></td></tr></tbody></table><p>类型为【视频内嵌引导关注按钮】时：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>duration</td><td>num</td><td>持续时间</td><td>单位为毫秒</td></tr><tr><td>posX</td><td>num</td><td>X坐标</td><td>区间：[118-549]</td></tr><tr><td>posY</td><td>num</td><td>Y坐标</td><td>区间：[82-293]</td></tr><tr><td>icon</td><td>str</td><td>按钮图片url</td><td>不应该是关注按钮吗，但这个是圆形的</td></tr><tr><td>type</td><td>num</td><td>关注按钮类型</td><td>0：仅关注<br>1：仅三联<br>2：关注+三联</td></tr></tbody></table><p><strong>示例：</strong></p><p>为视频<code>av201947622</code>（cid为<code>230709860</code>）的5000ms位置发送一条UP主头像弹幕<code>test</code></p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="background-color:#1E1E1E;color:#D4D4D4;"><pre class="shiki dark-plus vp-code"><code class="language-shell"><span class="line"><span style="color:#DCDCAA;">curl</span><span style="color:#CE9178;"> &#39;https://api.bilibili.com/x/v2/dm/command/post&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;type=1&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;aid=201947622&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;cid=230709860&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;progress=5000&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;plat=1&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;data={&quot;msg&quot;:&quot;test&quot;}&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;csrf=xxx&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">-b </span><span style="color:#CE9178;">&#39;SESSDATA=xxx&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details><summary>查看响应示例：</summary><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" style="background-color:#1E1E1E;color:#D4D4D4;"><pre class="shiki dark-plus vp-code"><code class="language-json"><span class="line"><span style="color:#D4D4D4;">{</span></span>
<span class="line"><span style="color:#9CDCFE;">    &quot;code&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">    &quot;message&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;0&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">    &quot;ttl&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">1</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">    &quot;data&quot;</span><span style="color:#D4D4D4;">: {</span></span>
<span class="line"><span style="color:#9CDCFE;">        &quot;id&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">39053842117558279</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">        &quot;oid&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">230709860</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">        &quot;mid&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">293793435</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">        &quot;type&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">1</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">        &quot;command&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;#UP#&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">        &quot;content&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;test&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">        &quot;extra&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;{</span><span style="color:#D7BA7D;">\\&quot;</span><span style="color:#CE9178;">icon</span><span style="color:#D7BA7D;">\\&quot;</span><span style="color:#CE9178;">:</span><span style="color:#D7BA7D;">\\&quot;</span><span style="color:#CE9178;">http://i0.hdslb.com/bfs/face/aebb2639a0d47f2ce1fec0631f412eaf53d4a0be.jpg</span><span style="color:#D7BA7D;">\\&quot;</span><span style="color:#CE9178;">}&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">        &quot;idStr&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;39053842117558279&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><p>为视频<code>av201947622</code>（cid为<code>230709860</code>）的5000ms位置发送一条发送关联视频弹幕<code>测试1234</code>关联视频为<code>BV1kz4y1X7XP</code></p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="background-color:#1E1E1E;color:#D4D4D4;"><pre class="shiki dark-plus vp-code"><code class="language-shell"><span class="line"><span style="color:#DCDCAA;">curl</span><span style="color:#CE9178;"> &#39;https://api.bilibili.com/x/v2/dm/command/post&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;type=2&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;aid=201947622&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;cid=230709860&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;progress=5000&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;plat=1&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;data={&quot;bvid&quot;:&quot;BV1kz4y1X7XP&quot;,&quot;msg&quot;:&quot;测试1234&quot;}&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;csrf=xxx&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">-b </span><span style="color:#CE9178;">&#39;SESSDATA=xxx&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details><summary>查看响应示例：</summary><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" style="background-color:#1E1E1E;color:#D4D4D4;"><pre class="shiki dark-plus vp-code"><code class="language-json"><span class="line"><span style="color:#D4D4D4;">{</span></span>
<span class="line"><span style="color:#9CDCFE;">    &quot;code&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">    &quot;message&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;0&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">    &quot;ttl&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">1</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">    &quot;data&quot;</span><span style="color:#D4D4D4;">: {</span></span>
<span class="line"><span style="color:#9CDCFE;">        &quot;id&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">39054383689236483</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">        &quot;oid&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">230709860</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">        &quot;mid&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">293793435</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">        &quot;type&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">2</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">        &quot;command&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;#LINK#&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">        &quot;content&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;测试1234&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">        &quot;progress&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">11925</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">        &quot;extra&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;{</span><span style="color:#D7BA7D;">\\&quot;</span><span style="color:#CE9178;">aid</span><span style="color:#D7BA7D;">\\&quot;</span><span style="color:#CE9178;">:583785685,</span><span style="color:#D7BA7D;">\\&quot;</span><span style="color:#CE9178;">title</span><span style="color:#D7BA7D;">\\&quot;</span><span style="color:#CE9178;">:</span><span style="color:#D7BA7D;">\\&quot;</span><span style="color:#CE9178;">【cmd】访问api 命令行也能上B站</span><span style="color:#D7BA7D;">\\&quot;</span><span style="color:#CE9178;">,</span><span style="color:#D7BA7D;">\\&quot;</span><span style="color:#CE9178;">bvid</span><span style="color:#D7BA7D;">\\&quot;</span><span style="color:#CE9178;">:</span><span style="color:#D7BA7D;">\\&quot;</span><span style="color:#CE9178;">BV1kz4y1X7XP</span><span style="color:#D7BA7D;">\\&quot;</span><span style="color:#CE9178;">}&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">        &quot;idStr&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;39054383689236483&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><p>为视频<code>av201947622</code>（cid为<code>230709860</code>）的5000ms位置发送视频内嵌引导关注按钮，X坐标为118，Y坐标为82，持续时间为5000ms</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="background-color:#1E1E1E;color:#D4D4D4;"><pre class="shiki dark-plus vp-code"><code class="language-shell"><span class="line"><span style="color:#DCDCAA;">curl</span><span style="color:#CE9178;"> &#39;https://api.bilibili.com/x/v2/dm/command/post&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;type=5&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;aid=201947622&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;cid=230709860&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;progress=5000&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;plat=1&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;data={&quot;duration&quot;:5000,&quot;posX&quot;:118,&quot;posY&quot;:82}&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;csrf=xxx&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">-b </span><span style="color:#CE9178;">&#39;SESSDATA=xxx&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details><summary>查看响应示例：</summary><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" style="background-color:#1E1E1E;color:#D4D4D4;"><pre class="shiki dark-plus vp-code"><code class="language-json"><span class="line"><span style="color:#D4D4D4;">{</span></span>
<span class="line"><span style="color:#9CDCFE;">    &quot;code&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">    &quot;message&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;0&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">    &quot;ttl&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">1</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">    &quot;data&quot;</span><span style="color:#D4D4D4;">: {</span></span>
<span class="line"><span style="color:#9CDCFE;">        &quot;id&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">39055158405496839</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">        &quot;oid&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">230709860</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">        &quot;mid&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">293793435</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">        &quot;type&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">5</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">        &quot;command&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;#ATTENTION#&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">        &quot;progress&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">5000</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">        &quot;extra&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;{</span><span style="color:#D7BA7D;">\\&quot;</span><span style="color:#CE9178;">duration</span><span style="color:#D7BA7D;">\\&quot;</span><span style="color:#CE9178;">:5000,</span><span style="color:#D7BA7D;">\\&quot;</span><span style="color:#CE9178;">posX</span><span style="color:#D7BA7D;">\\&quot;</span><span style="color:#CE9178;">:118,</span><span style="color:#D7BA7D;">\\&quot;</span><span style="color:#CE9178;">posY</span><span style="color:#D7BA7D;">\\&quot;</span><span style="color:#CE9178;">:82}&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">        &quot;idStr&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;39055158405496839&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="发送打分弹幕" tabindex="-1"><a class="header-anchor" href="#发送打分弹幕"><span>发送打分弹幕</span></a></h2><blockquote><p>https://api.bilibili.com/x/v2/dm/command/grade/post</p></blockquote><p><em>请求方式: POST</em></p><p>认证方式: Cookie (SESSDATA)</p><p><strong>正文参数 (application/x-www-form-urlencoded):</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>内容</th><th>必要性</th><th>备注</th></tr></thead><tbody><tr><td>aid</td><td>num</td><td>稿件 aid</td><td>必要</td><td></td></tr><tr><td>cid</td><td>num</td><td>分 P cid</td><td>必要</td><td></td></tr><tr><td>progress</td><td>num</td><td>播放进度</td><td>必要</td><td>单位为毫秒</td></tr><tr><td>grade_id</td><td>num</td><td>打分 id</td><td>必要</td><td></td></tr><tr><td>grade_score</td><td>num</td><td>分数</td><td>偶数, 最大 10</td><td></td></tr><tr><td>polaris_app_id</td><td>num</td><td>100</td><td>不必要</td><td></td></tr><tr><td>polaris_platfrom</td><td>num</td><td>5</td><td>不必要</td><td></td></tr><tr><td>spmid</td><td>str</td><td>333.788.0.0</td><td>不必要</td><td></td></tr><tr><td>from_spmid</td><td>str</td><td>来源 spmid</td><td>不必要</td><td></td></tr><tr><td>csrf</td><td>str</td><td>CSRF Token (即 Cookie 中的 bili_jct)</td><td>必要</td><td></td></tr></tbody></table><p><strong>JSON回复:</strong></p><p>根对象:</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>code</td><td>num</td><td>返回值</td><td>0: 成功</td></tr><tr><td>message</td><td>str</td><td>错误信息</td><td>默认为 0</td></tr><tr><td>ttl</td><td>num</td><td>1</td><td></td></tr><tr><td>data</td><td>obj</td><td>信息本体</td><td></td></tr></tbody></table><p><code>data</code>对象:</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>dmid</td><td>num</td><td>弹幕dmid</td><td></td></tr><tr><td>dmid_str</td><td>str</td><td>弹幕dmid</td><td>字串形式</td></tr><tr><td>visible</td><td>bool</td><td>是否可见</td><td></td></tr><tr><td>action</td><td>str</td><td>动作</td><td><code>&quot;grade:&quot;</code> + (请求的分数 / 2)</td></tr></tbody></table><p><strong>示例:</strong></p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="background-color:#1E1E1E;color:#D4D4D4;"><pre class="shiki dark-plus vp-code"><code class="language-shell"><span class="line"><span style="color:#DCDCAA;">curl</span><span style="color:#569CD6;"> -X</span><span style="color:#CE9178;"> POST</span><span style="color:#CE9178;"> &#39;https://api.bilibili.com/x/v2/dm/command/grade/post&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;aid=112861976201494&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;cid=500001629877726&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;progress=32000&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;grade_id=3651137&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;grade_score=10&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;csrf=xxx&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">-b </span><span style="color:#CE9178;">&#39;SESSDATA=xxx&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details><summary>查看响应示例:</summary><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" style="background-color:#1E1E1E;color:#D4D4D4;"><pre class="shiki dark-plus vp-code"><code class="language-json"><span class="line"><span style="color:#D4D4D4;">{</span></span>
<span class="line"><span style="color:#9CDCFE;">  &quot;code&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">  &quot;message&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;0&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">  &quot;ttl&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">1</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">  &quot;data&quot;</span><span style="color:#D4D4D4;">: {</span></span>
<span class="line"><span style="color:#9CDCFE;">    &quot;dmid&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">1651556419721443584</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">    &quot;dmidStr&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;1651556419721443584&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">    &quot;visible&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#569CD6;">true</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">    &quot;action&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;grade:5&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">  }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="撤回弹幕" tabindex="-1"><a class="header-anchor" href="#撤回弹幕"><span>撤回弹幕</span></a></h2><blockquote><p>https://api.bilibili.com/x/dm/recall</p></blockquote><p><em>请求方式：POST</em></p><p>认证方式：Cookie（SESSDATA）或APP</p><p>仅能撤回自己两分钟内的弹幕，且每天只有3次机会</p><p><strong>正文参数（ application/x-www-form-urlencoded ）：</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>内容</th><th>必要性</th><th>备注</th></tr></thead><tbody><tr><td>access_key</td><td>str</td><td>APP登录Token</td><td>APP方式必要</td><td></td></tr><tr><td>dmid</td><td>num</td><td>弹幕dmid</td><td>必要</td><td></td></tr><tr><td>cid</td><td>num</td><td>视频cid</td><td>必要</td><td></td></tr><tr><td>csrf</td><td>str</td><td>CSRF Token（位于cookie）</td><td>Cookie方式必要</td><td></td></tr></tbody></table><p><strong>json回复：</strong></p><p>根对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>code</td><td>num</td><td>返回值</td><td>0：成功<br>-101：账号未登录<br>-102：账号被封停<br>-111：csrf校验失败<br>-400：请求错误<br>-404：无此项<br>36301：撤回失败，弹幕发送已过2分钟<br>36302：撤回失败，弹幕已经被删除或撤回<br>36303：撤回失败，今天撤回的机会已经用完<br>36304：撤回失败，服务器出错</td></tr><tr><td>message</td><td>str</td><td>错误信息</td><td>成功后显示剩余次数</td></tr><tr><td>ttl</td><td>num</td><td>1</td><td></td></tr></tbody></table><p><strong>示例：</strong></p><p>撤回<code>cid=168901231</code>下的弹幕<code>32310301474947077</code>的弹幕</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="background-color:#1E1E1E;color:#D4D4D4;"><pre class="shiki dark-plus vp-code"><code class="language-shell"><span class="line"><span style="color:#DCDCAA;">curl</span><span style="color:#CE9178;"> &#39;https://api.bilibili.com/x/dm/recall&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;cid=168901231&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;dmid=32310301474947077&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;csrf=xxx&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">-b </span><span style="color:#CE9178;">&#39;SESSDATA=xxx&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details><summary>查看响应示例：</summary><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" style="background-color:#1E1E1E;color:#D4D4D4;"><pre class="shiki dark-plus vp-code"><code class="language-json"><span class="line"><span style="color:#D4D4D4;">{</span></span>
<span class="line"><span style="color:#9CDCFE;">    &quot;code&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">    &quot;message&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;撤回成功，你还有3次撤回机会&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="购买高级弹幕发送权限" tabindex="-1"><a class="header-anchor" href="#购买高级弹幕发送权限"><span>购买高级弹幕发送权限</span></a></h2><blockquote><p>https://api.bilibili.com/x/dm/adv/buy</p></blockquote><p><em>请求方式：POST</em></p><p>认证方式：Cookie（SESSDATA）或APP</p><p>购买一次需要2硬币，同时向up主发送请求</p><p><strong>正文参数（ application/x-www-form-urlencoded ）：</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>内容</th><th>必要性</th><th>备注</th></tr></thead><tbody><tr><td>access_key</td><td>str</td><td>APP登录Token</td><td>APP方式必要</td><td></td></tr><tr><td>mode</td><td>str</td><td>sp</td><td>必要</td><td></td></tr><tr><td>cid</td><td>num</td><td>视频cid</td><td>必要</td><td></td></tr><tr><td>csrf</td><td>str</td><td>CSRF Token（位于cookie）</td><td>Cookie方式必要</td><td></td></tr></tbody></table><p><strong>json回复：</strong></p><p>根对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>code</td><td>num</td><td>返回值</td><td>0：成功<br>-101：账号未登录<br>-102：账号被封停<br>-111：csrf校验失败<br>-107：硬币不足<br>-400：请求错误<br>36007：不允许购买<br>36009：正在确认中<br>36010：已购买</td></tr><tr><td>message</td><td>str</td><td>返回信息</td><td></td></tr><tr><td>ttl</td><td>num</td><td>1</td><td></td></tr></tbody></table><p>示例：</p><p>购买视频cid为<code>168901231</code>的高级弹幕发送权限</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="background-color:#1E1E1E;color:#D4D4D4;"><pre class="shiki dark-plus vp-code"><code class="language-shell"><span class="line"><span style="color:#DCDCAA;">curl</span><span style="color:#CE9178;"> &#39;https://api.bilibili.com/x/dm/adv/buy&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;cid=168901231&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;mode=sp&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;csrf=xxx&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">-b </span><span style="color:#CE9178;">&#39;SESSDATA=xxx&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details><summary>查看响应示例：</summary><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" style="background-color:#1E1E1E;color:#D4D4D4;"><pre class="shiki dark-plus vp-code"><code class="language-json"><span class="line"><span style="color:#D4D4D4;">{</span></span>
<span class="line"><span style="color:#9CDCFE;">    &quot;code&quot;</span><span style="color:#D4D4D4;">:</span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">    &quot;message&quot;</span><span style="color:#D4D4D4;">:</span><span style="color:#CE9178;">&quot;已成功购买&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="检测高级弹幕发送权限" tabindex="-1"><a class="header-anchor" href="#检测高级弹幕发送权限"><span>检测高级弹幕发送权限</span></a></h2><blockquote><p>https://api.bilibili.com/x/dm/adv/state</p></blockquote><p><em>请求方式：GET</em></p><p>认证方式：Cookie（SESSDATA）或APP</p><p><strong>url参数：</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>内容</th><th>必要性</th><th>备注</th></tr></thead><tbody><tr><td>access_key</td><td>str</td><td>APP登录Token</td><td>APP方式必要</td><td></td></tr><tr><td>mode</td><td>str</td><td>sp</td><td>必要</td><td></td></tr><tr><td>cid</td><td>num</td><td>视频cid</td><td>必要</td><td></td></tr></tbody></table><p><strong>json回复：</strong></p><p>根对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>code</td><td>num</td><td>返回值</td><td>0：成功<br>-101：账号未登录<br>--400：请求错误</td></tr><tr><td>message</td><td>str</td><td>错误信息</td><td>默认为0</td></tr><tr><td>ttl</td><td>num</td><td>1</td><td></td></tr><tr><td>data</td><td>有效时：obj<br>无效时：null</td><td>有效时：信息本体</td><td></td></tr></tbody></table><p><code>data</code>对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>coins</td><td>num</td><td>需要支付的硬币数</td><td></td></tr><tr><td>confirm</td><td>num</td><td>是否同意</td><td>1：同意<br>2：未同意<br>未购买时无此项</td></tr><tr><td>accept</td><td>bool</td><td>是否允许申请</td><td>true：允许<br>false：不允许</td></tr><tr><td>hasBuy</td><td>bool</td><td>是否已购买</td><td>true：已购买<br>未购买时无此项</td></tr></tbody></table><p><strong>示例：</strong></p><p>查询视频cid为<code>168901231</code>的视频高级弹幕权限购买状态</p><p>当前状态为已购买且同意</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="background-color:#1E1E1E;color:#D4D4D4;"><pre class="shiki dark-plus vp-code"><code class="language-shell"><span class="line"><span style="color:#DCDCAA;">curl</span><span style="color:#569CD6;"> -G</span><span style="color:#CE9178;"> &#39;https://api.bilibili.com/x/dm/adv/state&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;cid=168901231&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;mode=sp&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">-b </span><span style="color:#CE9178;">&#39;SESSDATA=xxx&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details><summary>查看响应示例：</summary><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" style="background-color:#1E1E1E;color:#D4D4D4;"><pre class="shiki dark-plus vp-code"><code class="language-json"><span class="line"><span style="color:#D4D4D4;">{</span></span>
<span class="line"><span style="color:#9CDCFE;">    &quot;code&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">    &quot;message&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;0&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">    &quot;ttl&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">1</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">    &quot;data&quot;</span><span style="color:#D4D4D4;">: {</span></span>
<span class="line"><span style="color:#9CDCFE;">        &quot;coins&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">2</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">        &quot;confirm&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">1</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">        &quot;accept&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#569CD6;">true</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">        &quot;hasBuy&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#569CD6;">true</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="点赞弹幕" tabindex="-1"><a class="header-anchor" href="#点赞弹幕"><span>点赞弹幕</span></a></h2><blockquote><p>https://api.bilibili.com/x/v2/dm/thumbup/add</p></blockquote><p><em>请求方式：POST</em></p><p>认证方式：Cookie（SESSDATA）或APP</p>`,114)),t("p",null,[s[16]||(s[16]=n("查询指定弹幕点赞状态参阅文档 ")),d(a,{to:"/docs/danmaku/thumbup.html"},{default:e(()=>s[15]||(s[15]=[n("弹幕点赞查询")])),_:1,__:[15]})]),s[19]||(s[19]=l(`<p><strong>正文参数（ application/x-www-form-urlencoded ）：</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>内容</th><th>必要性</th><th>备注</th></tr></thead><tbody><tr><td>access_key</td><td>str</td><td>APP 登录 Token</td><td>APP 方式必要</td><td></td></tr><tr><td>dmid</td><td>num</td><td>目标弹幕 dmid</td><td>必要</td><td></td></tr><tr><td>oid</td><td>num</td><td>目标弹幕所在视频 cid</td><td>必要</td><td></td></tr><tr><td>op</td><td>num</td><td>操作</td><td>必要</td><td>1：点赞<br>2：取消点赞</td></tr><tr><td>platform</td><td>str</td><td>平台标识</td><td>非必要</td><td>web_player：web 播放器<br>android：安卓端</td></tr><tr><td>csrf</td><td>str</td><td>CSRF Token（位于 Cookie）</td><td>Cookie 方式必要</td><td></td></tr></tbody></table><p><strong>json回复：</strong></p><p>根对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>code</td><td>num</td><td>返回值</td><td>0：成功<br>-101：账号未登录<br>-111：csrf 校验失败<br>-400：请求错误<br>36106：该弹幕已被删除<br>36805：该视频禁止点赞弹幕<br>65004：取消赞失败 未点赞过<br>65006：已赞过</td></tr><tr><td>message</td><td>str</td><td>错误信息</td><td>默认为0</td></tr><tr><td>tll</td><td>num</td><td>1</td><td></td></tr></tbody></table><p><strong>示例</strong></p><p>为<code>cid=145928946</code>下的弹幕<code>35600074482384899</code>点赞</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="background-color:#1E1E1E;color:#D4D4D4;"><pre class="shiki dark-plus vp-code"><code class="language-shell"><span class="line"><span style="color:#DCDCAA;">curl</span><span style="color:#CE9178;"> &#39;https://api.bilibili.com/x/v2/dm/thumbup/add&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#569CD6;">    --data-urlencode</span><span style="color:#CE9178;"> &#39;dmid=35600074482384899&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#569CD6;">    --data-urlencode</span><span style="color:#CE9178;"> &#39;oid=145928946&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#569CD6;">    --data-urlencode</span><span style="color:#CE9178;"> &#39;op=1&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#569CD6;">    --data-urlencode</span><span style="color:#CE9178;"> &#39;platform=web_player&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#569CD6;">    --data-urlencode</span><span style="color:#CE9178;"> &#39;csrf=xxx&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#569CD6;">    -b</span><span style="color:#CE9178;"> &#39;SESSDATA=xxx&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details><summary>查看响应示例：</summary><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" style="background-color:#1E1E1E;color:#D4D4D4;"><pre class="shiki dark-plus vp-code"><code class="language-json"><span class="line"><span style="color:#D4D4D4;">{</span></span>
<span class="line"><span style="color:#9CDCFE;">    &quot;code&quot;</span><span style="color:#D4D4D4;">:</span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">    &quot;message&quot;</span><span style="color:#D4D4D4;">:</span><span style="color:#CE9178;">&quot;0&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">    &quot;ttl&quot;</span><span style="color:#D4D4D4;">:</span><span style="color:#B5CEA8;">1</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="举报弹幕" tabindex="-1"><a class="header-anchor" href="#举报弹幕"><span>举报弹幕</span></a></h2><blockquote><p>https://api.bilibili.com/x/dm/report/add</p></blockquote><p><em>请求方式：POST</em></p><p>认证方式：Cookie（SESSDATA）或APP</p><p><strong>正文参数（ application/x-www-form-urlencoded ）：</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>内容</th><th>必要性</th><th>备注</th></tr></thead><tbody><tr><td>access_key</td><td>str</td><td>APP登录Token</td><td>APP方式必要</td><td></td></tr><tr><td>cid</td><td>num</td><td>视频cid</td><td>必要</td><td></td></tr><tr><td>dmid</td><td>num</td><td>弹幕dmid</td><td>必要</td><td></td></tr><tr><td>reason</td><td>num</td><td>举报类型</td><td>必要</td><td><strong>类型代码见下表</strong></td></tr><tr><td>content</td><td>str</td><td>其他举报备注</td><td>非必要</td><td><code>reason=11</code>时有效</td></tr><tr><td>csrf</td><td>str</td><td>CSRF Token（位于cookie）</td><td>Cookie方式必要</td><td></td></tr></tbody></table><p>举报类型<code>reason</code>：</p><table><thead><tr><th>代码</th><th>含义</th></tr></thead><tbody><tr><td>1</td><td>违法违禁</td></tr><tr><td>2</td><td>色情低俗</td></tr><tr><td>3</td><td>赌博诈骗</td></tr><tr><td>4</td><td>人身攻击</td></tr><tr><td>5</td><td>侵犯隐私</td></tr><tr><td>6</td><td>垃圾广告</td></tr><tr><td>7</td><td>引战</td></tr><tr><td>8</td><td>剧透</td></tr><tr><td>9</td><td>恶意刷屏</td></tr><tr><td>10</td><td>视频无关</td></tr><tr><td>11</td><td>其他</td></tr><tr><td>12</td><td>青少年不良</td></tr></tbody></table><p><strong>json回复：</strong></p><p>根对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>code</td><td>num</td><td>返回值</td><td>0：成功<br>-101：账号未登录<br>-111：csrf 校验失败<br>-400：请求错误<br>36201：举报弹幕不存在<br>36203：举报原因类型错误<br>36204：已举报</td></tr><tr><td>message</td><td>str</td><td>错误信息</td><td>默认为空</td></tr><tr><td>tll</td><td>num</td><td>1</td><td>举报失败时</td></tr></tbody></table><p><strong>示例</strong></p><p>举报<code>cid=145928946</code>下的弹幕<code>35600074482384899</code>，理由是<code>引战</code></p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="background-color:#1E1E1E;color:#D4D4D4;"><pre class="shiki dark-plus vp-code"><code class="language-shell"><span class="line"><span style="color:#DCDCAA;">curl</span><span style="color:#CE9178;"> &#39;https://api.bilibili.com/x/dm/report/add&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;cid=145928946&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;dmid=35600074482384899&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;reason=7&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;csrf=xxx&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">-b </span><span style="color:#CE9178;">&#39;SESSDATA=xxx&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details><summary>查看响应示例：</summary><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" style="background-color:#1E1E1E;color:#D4D4D4;"><pre class="shiki dark-plus vp-code"><code class="language-json"><span class="line"><span style="color:#D4D4D4;">{</span></span>
<span class="line"><span style="color:#9CDCFE;">    &quot;code&quot;</span><span style="color:#D4D4D4;">:</span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">    &quot;message&quot;</span><span style="color:#D4D4D4;">:</span><span style="color:#CE9178;">&quot;&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="保护-删除弹幕" tabindex="-1"><a class="header-anchor" href="#保护-删除弹幕"><span>保护&amp;删除弹幕</span></a></h2><blockquote><p>https://api.bilibili.com/x/v2/dm/edit/state</p></blockquote><p><em>请求方式：POST</em></p><p>认证方式：Cookie（SESSDATA） 或APP</p><p>注：只能操作自己的稿件或有骑士权限的稿件</p><p><strong>正文参数（ application/x-www-form-urlencoded ）：</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>内容</th><th>必要性</th><th>备注</th></tr></thead><tbody><tr><td>access_key</td><td>str</td><td>APP登录Token</td><td>APP方式必要</td><td></td></tr><tr><td>type</td><td>num</td><td>弹幕类选择</td><td>必要</td><td>1：视频弹幕</td></tr><tr><td>oid</td><td>num</td><td>视频cid</td><td>必要</td><td></td></tr><tr><td>dmids</td><td>nums</td><td>弹幕dmid</td><td>必要</td><td>多个id之间用<code>,</code>分隔</td></tr><tr><td>state</td><td>num</td><td>操作代码</td><td>必要</td><td>1：删除弹幕<br>2：弹幕保护<br>3：取消保护</td></tr><tr><td>csrf</td><td>str</td><td>CSRF Token（位于cookie）</td><td>Cookie方式必要</td><td></td></tr></tbody></table><p><strong>json回复：</strong></p><p>根对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>code</td><td>num</td><td>返回值</td><td>0：成功<br>-101：账号未登录<br>-111：csrf 校验失败<br>-400：请求错误<br>-403：访问权限不足</td></tr><tr><td>message</td><td>str</td><td>错误信息</td><td>默认为0</td></tr><tr><td>ttl</td><td>num</td><td>1</td><td></td></tr></tbody></table><p><strong>示例</strong></p><p>删除<code>cid=145928946</code>下的弹幕<code>35600074482384899</code>、<code>39067304918515717</code>、<code>39082777041174531</code></p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="background-color:#1E1E1E;color:#D4D4D4;"><pre class="shiki dark-plus vp-code"><code class="language-shell"><span class="line"><span style="color:#DCDCAA;">curl</span><span style="color:#CE9178;"> &#39;https://api.bilibili.com/x/v2/dm/edit/state&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;type=1&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;oid=145928946&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;dmids=35600074482384899,39067304918515717,39082777041174531&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;state=1&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;csrf=xxx&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">-b </span><span style="color:#CE9178;">&#39;SESSDATA=xxx&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details><summary>查看响应示例：</summary><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" style="background-color:#1E1E1E;color:#D4D4D4;"><pre class="shiki dark-plus vp-code"><code class="language-json"><span class="line"><span style="color:#D4D4D4;">{</span></span>
<span class="line"><span style="color:#9CDCFE;">    &quot;code&quot;</span><span style="color:#D4D4D4;">:</span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">    &quot;message&quot;</span><span style="color:#D4D4D4;">:</span><span style="color:#CE9178;">&quot;0&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">    &quot;ttl&quot;</span><span style="color:#D4D4D4;">:</span><span style="color:#B5CEA8;">1</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="修改字幕池" tabindex="-1"><a class="header-anchor" href="#修改字幕池"><span>修改字幕池</span></a></h2><blockquote><p>https://api.bilibili.com/x/v2/dm/edit/pool</p></blockquote><p><em>请求方式：POST</em></p><p>认证方式：Cookie（SESSDATA） 或APP</p><p>注：只能操作自己的稿件或有骑士权限的稿件</p><p><strong>正文参数（ application/x-www-form-urlencoded ）：</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>内容</th><th>必要性</th><th>备注</th></tr></thead><tbody><tr><td>access_key</td><td>str</td><td>APP登录Token</td><td>APP方式必要</td><td></td></tr><tr><td>type</td><td>num</td><td>弹幕类选择</td><td>必要</td><td>1：视频弹幕</td></tr><tr><td>oid</td><td>num</td><td>视频cid</td><td>必要</td><td></td></tr><tr><td>dmids</td><td>nums</td><td>弹幕dmid</td><td>必要</td><td>多个id之间用<code>,</code>分隔</td></tr><tr><td>pool</td><td>num</td><td>操作代码</td><td>必要</td><td>0：移出字幕池<br>1：移入字幕池</td></tr><tr><td>csrf</td><td>str</td><td>CSRF Token（位于cookie）</td><td>Cookie方式必要</td><td></td></tr></tbody></table><p><strong>json回复：</strong></p><p>根对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>code</td><td>num</td><td>返回值</td><td>0：成功<br>-101：账号未登录<br>-111：csrf 校验失败<br>-400：请求错误<br>-403：访问权限不足</td></tr><tr><td>message</td><td>str</td><td>错误信息</td><td>默认为0</td></tr><tr><td>ttl</td><td>num</td><td>1</td><td></td></tr></tbody></table><p><strong>示例</strong></p><p>将<code>cid=145928946</code>下的弹幕<code>35600074482384899</code>、<code>39067304918515717</code>、<code>39082777041174531</code>移入字幕池</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="background-color:#1E1E1E;color:#D4D4D4;"><pre class="shiki dark-plus vp-code"><code class="language-shell"><span class="line"><span style="color:#DCDCAA;">curl</span><span style="color:#CE9178;"> &#39;https://api.bilibili.com/x/v2/dm/edit/state&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;type=1&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;oid=145928946&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;pool=1&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;dmids=35600074482384899,39067304918515717,39082777041174531&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">--data-urlencode </span><span style="color:#CE9178;">&#39;csrf=xxx&#39;</span><span style="color:#D7BA7D;"> \\</span></span>
<span class="line"><span style="color:#D4D4D4;">-b </span><span style="color:#CE9178;">&#39;SESSDATA=xxx&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details><summary>查看响应示例：</summary><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" style="background-color:#1E1E1E;color:#D4D4D4;"><pre class="shiki dark-plus vp-code"><code class="language-json"><span class="line"><span style="color:#D4D4D4;">{</span></span>
<span class="line"><span style="color:#9CDCFE;">    &quot;code&quot;</span><span style="color:#D4D4D4;">:</span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">    &quot;message&quot;</span><span style="color:#D4D4D4;">:</span><span style="color:#CE9178;">&quot;0&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">    &quot;ttl&quot;</span><span style="color:#D4D4D4;">:</span><span style="color:#B5CEA8;">1</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details>`,52))])}const b=o(i,[["render",D]]),m=JSON.parse('{"path":"/docs/danmaku/action.html","title":"弹幕操作","lang":"zh-CN","frontmatter":{},"git":{"updatedTime":1726759053000,"contributors":[{"name":"SocialSisterYi","username":"SocialSisterYi","email":"1440239038@qq.com","commits":5,"url":"https://github.com/SocialSisterYi"},{"name":"SessionHu","username":"SessionHu","email":"102411014+SessionHu@users.noreply.github.com","commits":2,"url":"https://github.com/SessionHu"}],"changelog":[{"hash":"1e24c6b1889160c4c35c01416aa4239501accf5f","time":1726759053000,"email":"102411014+SessionHu@users.noreply.github.com","author":"Session小胡","message":"调整部分接口描述与错误修复 (#1088)","coAuthors":[{"name":"社会易姐QwQ","email":"45892418+SocialSisterYi@users.noreply.github.com"}]},{"hash":"60a0c5d1a2f44fe61335da04571305fa7727a968","time":1724238159000,"email":"102411014+SessionHu@users.noreply.github.com","author":"Session小胡","message":"feat: 各种接口补充与错误修正 (#1066)"},{"hash":"45dd000836b1c6edf9e366f10997515552660924","time":1685953337000,"email":"1440239038@qq.com","author":"SocialSisterYi","message":"update 【弹幕操作】APIDoc"},{"hash":"87d56b66e7ce375029bccf9efda5314964b0528d","time":1684287732000,"email":"1440239038@qq.com","author":"SocialSisterYi","message":"update 【danmaku thumbup list】 APIDoc"},{"hash":"f6760f4be38d5b592d396b211e48c666286524de","time":1677124138000,"email":"1440239038@qq.com","author":"SocialSisterYi","message":"🔨remove header index"},{"hash":"7d89ece2ac46425810647c4ac92acf5f3721cb68","time":1676998806000,"email":"1440239038@qq.com","author":"SocialSisterYi","message":"🚀调整项目结构"}]},"filePathRelative":"docs/danmaku/action.md"}');export{b as comp,m as data};
